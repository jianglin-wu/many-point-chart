{"version":3,"file":"index.esm.js","sources":["../src/scripts/utils.js","../src/scripts/event-emitter.js","../src/main.js"],"sourcesContent":["\n\nexport function logs (type, message) {\n  if (typeof type !== 'string' || console[type] === undefined) {\n    console.error('Logs function \"type\" parameter invalid!')\n    return\n  }\n  if (type === 'error') {\n    throw new Error(message)\n\n  }\n  console[type](message)\n}\n\nexport function inherit(prototype) {\n  if (prototype === null) {\n    throw new TypeError('Prototype object of inherit(prototype) cannot be null.');\n  }\n  if (Object.create) {\n    return Object.create(prototype.prototype);\n  }\n  var type = typeof prototype;\n  if (type !== 'object' && type !== 'function') {\n    throw new TypeError('Prototype object of inherit(prototype) is not an object or a function.');\n  }\n  var constructor = new Function('');\n  constructor.prototype = prototype.prototype;\n  return new constructor();\n}\n\nexport function defineSubClass(baseClassConstructor, subClassConstructor) {\n  subClassConstructor.prototype = inherit(baseClassConstructor);\n  subClassConstructor.prototype.constructor = subClassConstructor;\n}\n","/**********************************************************/\n/*                                                        */\n/*                       事件处理器                        */\n/*                                                        */\n/**********************************************************/\nexport default class EventEmitter {\n  constructor() {\n    this.events = {}\n  }\n\n  //绑定事件函数\n  on(eventName, callback) {\n    this.events[eventName] = this.events[eventName] || [];\n    this.events[eventName].push(callback);\n  }\n\n  //触发事件函数\n  emit (eventName, ...args) {\n    const events = this.events[eventName]\n    if (!events) {\n      return\n    }\n\n    events.forEach((event) => {\n      event.apply(null, args)\n    })\n  }\n}\n","import { version, name } from '../package.json'\nimport { logs } from './scripts/utils'\nimport EventEmitter from './scripts/event-emitter.js'\n\n/**\n * 读取键名\n * 如：对象object, 键名\"a.b.c\" 读取为 object[a][b][c]\n */\nfunction readKeyValue (object, keyNames) {\n  let target = object\n  keyNames.split('.').forEach((keyName) => {\n    target = target[keyName]\n  })\n  return target\n}\n\n/**\n * 获取　Canvas\n */\nfunction getCanvasElement(el) {\n  let canvas = null\n  if (typeof el === 'string') {\n    canvas = document.getElementById(el)\n  } else {\n    canvas = el\n  }\n  if (!canvas || !canvas.getContext) {\n    logs('error', 'Elements do not exist or browsers do not support!')\n    return false;\n  }\n  return canvas\n}\n\n/**\n * 绘制圆点虚线\n */\nfunction　dottedLine(ctx, x1, y1, x2, y2, interval) {\n  if (!interval) {\n    interval = 5\n  }\n  var isHorizontal = true\n  if (x1 == x2) {\n    isHorizontal = false\n  }\n  var len = isHorizontal ? x2 - x1 : y2 - y1\n  ctx.moveTo(x1, y1)\n  var progress = 0\n  while (len > progress) {\n    progress += interval\n    if (progress > len) {\n      progress = len\n    }\n    if (isHorizontal) {\n      ctx.moveTo(x1 + progress, y1)\n      ctx.arc(x1 + progress, y1, 1, 0, Math.PI * 2, true)\n      ctx.fill()\n    } else {\n      ctx.moveTo(x1, y1 + progress)\n      ctx.arc(x1, y1 + progress, 1, 0, Math.PI * 2, true)\n      ctx.fill()\n    }\n  }\n}\n\n/**\n * 刻度线\n */\nfunction drawScale(ctx, location, parames) {\n  const { x, y, w, h } = location\n  const { title, keyName, lineWidth, strokeStyle, fillStyle } = parames\n  ctx.lineWidth = lineWidth\n  ctx.strokeStyle = strokeStyle\n  ctx.fillStyle = fillStyle\n  ctx.beginPath()\n  ctx.moveTo(x, y)\n  ctx.lineTo(x + w, y)\n  ctx.stroke()\n  return function (data) {\n    const XList = []\n    const startY = y + lineWidth\n    const surplusH = h - lineWidth\n    const scaleHeight = surplusH * 0.3\n    const fontSize = surplusH * 0.5\n    const textTop = startY + scaleHeight + (surplusH * 0.2) + fontSize\n    const scaleCount = data.length\n    let span = w / (scaleCount + 1)\n    let offsetLeft = x + span\n\n    // 设置title\n    ctx.lineWidth = lineWidth\n    ctx.strokeStyle = strokeStyle\n    ctx.fillStyle = fillStyle\n    ctx.textAlign = 'left'\n    ctx.font = fontSize + 'px Arial'\n    ctx.fillText(title, x, textTop, span / 1.5)\n    ctx.beginPath()\n    data.forEach((item) => {\n      const name = readKeyValue(item, keyName)\n      ctx.moveTo(offsetLeft, startY)\n      ctx.lineTo(offsetLeft, startY + scaleHeight)\n      ctx.textAlign = 'center'\n      ctx.font = fontSize + 'px Arial'\n      ctx.fillText(name, offsetLeft, textTop, span * 0.8)\n      XList.push({\n        name,\n        span,\n        offsetLeft,\n      })\n      offsetLeft += span\n    })\n    ctx.stroke()\n    return XList\n  }\n}\n\n/**\n * 单张表中的图\n */\nfunction singleChart(ctx, location, parames) {\n  const { x, y, w, h } = location\n  const { topShow, bottomShow } = parames\n  const lineWidth = 1\n  // 虚线行距\n  let gridSpacingY = 40\n\n  if (topShow || bottomShow) {\n    ctx.setLineDash([])\n    ctx.strokeStyle = '#000'\n    ctx.lineWidth = lineWidth\n    ctx.beginPath()\n    // 顶部线条\n    if (topShow) {\n      ctx.moveTo(x, y + lineWidth)\n      ctx.lineTo(x + w, y + lineWidth)\n    }\n    // 底部线条\n    if (bottomShow) {\n      ctx.moveTo(x, y + h - lineWidth)\n      ctx.lineTo(x + w, y + h - lineWidth)\n    }\n    ctx.stroke()\n  }\n\n  const gridCount = parseInt(h / gridSpacingY, 10)\n  gridSpacingY += (h % gridSpacingY) / gridCount\n  let gridTop = y\n  ctx.beginPath()\n  for (let i = 1; i < gridCount; i++) {\n    gridTop　+= gridSpacingY\n    ctx.strokeStyle = '#ccc'\n    // ctx.strokeStyle = '#eee'\n    // // 绘制圆点虚线\n    // dottedLine(ctx, x - 4, gridTop, x + w, gridTop, 8)\n\n    // 绘制方块虚线\n    ctx.setLineDash([5, 2, 25, 10])\n    ctx.moveTo(x, gridTop)\n    ctx.lineTo(x + w, gridTop)\n  }\n  ctx.stroke()\n}\n\n/**\n * 图表\n */\nfunction drawTables(ctx, location, parames) {\n  const { x, y, w, h } = location\n  const { tables, offsetLeft, scaleTop } = parames\n  const fontSize = 12\n  const textWidth = offsetLeft * 0.8\n  const tableHeight = h / tables.length\n  ctx.textAlign = 'right'\n  ctx.font = fontSize + 'px Arial'\n  const lastBottomShow = scaleTop - (y + h) > h * 0.01\n  tables.forEach(({ title, fillStyle }, index) => {\n    const chartY = y + (tableHeight * index)\n    const textY = (tableHeight + fontSize) / 2 + chartY\n    ctx.fillStyle = fillStyle\n    ctx.fillText(title, textWidth, textY, textWidth)\n    singleChart(ctx, {\n        x: offsetLeft,\n        y: chartY,\n        w: w - offsetLeft,\n        h: tableHeight,\n      }, {\n        topShow: index === 0,\n        bottomShow: index === tables.length - 1 ? lastBottomShow : true,\n    })\n  })\n  return function (XList, data) {\n    return tables.map((table, tableIndex) => {\n      const {\n        keyName, min, max, setPercentage, lineWidth,\n        pointRadius, pointRadian, fillStyle, strokeStyle,\n      } = table\n      const chartY = y + (tableHeight * tableIndex)\n      const difference = max - min\n      ctx.setLineDash([])\n      ctx.strokeStyle = strokeStyle\n      ctx.fillStyle = fillStyle\n      ctx.lineWidth = lineWidth\n\n      ctx.beginPath()\n      const pointList = XList.map(({ name, span, offsetLeft }, xIndex) => {\n        const x = offsetLeft\n        let values = data[xIndex][keyName]\n        const setLint = (value, index = 0) => {\n          let percentage = setPercentage(value, difference, min)\n          const y = chartY + tableHeight - (tableHeight * percentage)\n          if (xIndex === 0 && index === 0) {\n            ctx.moveTo(x, y)\n          } else {\n            ctx.lineTo(x, y)\n          }\n          return { y, percentage, value }\n        }\n        if (Array.isArray(values)) {\n          values = values.map(setLint)\n        } else if (typeof values === 'number') {\n          values = setLint(values)\n        } else {\n          values = []\n        }\n        return { name, values, x, span }\n      })\n      ctx.stroke()\n\n      // 设置圆点\n      pointList.forEach(({ values, x }) => {\n        values.forEach(({ y }) => {\n          ctx.beginPath()\n          ctx.arc(x, y, pointRadius, 0, pointRadian, true)\n          ctx.fill()\n          ctx.stroke()\n        })\n      })\n      return { pointList, chartY, tableHeight }\n    })\n  }\n}\n\n/**\n * 计算百分比\n */\nfunction setPercentageDefault(value, difference, min) {\n  return (value - min) / difference\n}\n\nclass Xmany extends EventEmitter {\n  constructor (el, config) {\n    super()\n    this.ctx = null\n    this.options = null\n    this.data = null\n    this.scaleList = null\n    this.pointAllList = null\n    this.config = config\n    this.canvas = getCanvasElement(el)\n    this.initCanvas()\n  }\n\n  /**\n   * 初始化操作\n   */\n  initCanvas () {\n    const { width, height } = this.config\n    this.canvas.setAttribute('width', width)\n    this.canvas.setAttribute('height', height)\n    this.ctx = this.canvas.getContext('2d')\n  }\n\n  /**\n   * 设置默认值\n   */\n  setOptions ({ scale = {}, chart = {}}) {\n    const options = {}\n    options.scale = (({\n      title = '杆号', keyName　= 'pole.poleName', height = 30,\n      lineWidth = 1, strokeStyle = '#000', fillStyle = '#000',\n    }) => {\n      return { title, keyName, height, lineWidth, strokeStyle, fillStyle }\n    })(scale)\n    options.chart = (({ offsetLeft = 100, tables = [], tablesHeight = 0 }) => {\n      const newChart = {}\n      newChart.offsetLeft = offsetLeft\n      newChart.tablesHeight = tablesHeight\n      newChart.tables = tables.map(({\n        title = '表名', keyName = '', min = 0, max = 100,\n        setPercentage = null, pointRadius = 6, pointRadian = 360 * Math.PI / 180,\n        fillStyle = '#000', strokeStyle = '#000', lineWidth = 1,\n      }) => {\n        return {\n          title, keyName, lineWidth, min, max, pointRadius, pointRadian,\n          setPercentage: setPercentage || setPercentageDefault,\n          fillStyle, strokeStyle,\n        }\n      })\n      return newChart\n    })(chart)\n    return this.options = options\n  }\n\n  draw (options, data) {\n    this.setOptions(options)\n    if (this.data) {\n      this.clear()\n    }\n    this.data = data\n    this.layout()\n  }\n\n  layout () {\n    const { ctx, config, options, data } = this\n    const { width, height } = config\n    const { scale, chart } = options\n    const { offsetLeft, tablesHeight, tables } = chart\n    const scaleHeight = scale.height\n    const scaleTop = height - scaleHeight\n    this.scaleList = drawScale(ctx, {\n        x: offsetLeft,\n        y: height - scaleHeight,\n        w: width - offsetLeft,\n        h: scaleHeight,\n      },\n      scale,\n    )(data)\n    this.pointAllList = drawTables(ctx, {\n        x: 0,\n        y: 0,\n        w: width - 0,\n        h: tablesHeight || scaleTop,\n      }, {\n        offsetLeft,\n        tables,\n        scaleTop,\n    })(this.scaleList, data)\n    this.watchEvent()\n    this.addEvent()\n  }\n\n  clear () {\n    const ctx = this.ctx\n    const { width, height } = this.config\n    ctx.clearRect(0, 0, width, height)\n  }\n\n  watchEvent () {\n    const canvas = this.canvas\n    const ctx = this.ctx\n    const pointAllList = this.pointAllList\n    const that = this\n    let isInPointPath = false\n    let isInAxisX = false\n    let isInTable = false\n    canvas.addEventListener('mouseenter', function(){\n      that.emit('mouseenter')\n    })\n    canvas.addEventListener('mousemove', function(e){\n      let isThisInPointPath = false\n      let isThisInAxisX = false\n      let isThisInTable = false\n      that.emit('mousemove')\n      pointAllList.forEach(({ pointList, chartY, tableHeight }, tableIndex) => {\n        pointList.forEach(({ values, x, name, span }, xIndex) => {\n          const pointListWidth = (pointList.length + 1) * span\n          values.forEach(({ y }, valueIndex) => {\n            if(that.inPointPath(x, y, e.offsetX, e.offsetY, tableIndex)) {\n              if (isInPointPath) {\n                that.emit('pointMousemove', e, { x, y }, { tableIndex, xIndex, valueIndex })\n              } else {\n                that.emit('pointMouseenter', e, { x, y }, { tableIndex, xIndex, valueIndex })\n                isInPointPath = true\n              }\n              isThisInPointPath = true\n            }\n            if (that.inAxisX(x, chartY, span, tableHeight, e.offsetX, e.offsetY, tableIndex)) {\n              if (isInAxisX) {\n                that.emit(\n                  'axisXMousemove',\n                  e,\n                  { x, y: chartY, w: span, h: tableHeight },\n                  { tableIndex, xIndex },\n                )\n              } else {\n                that.emit(\n                  'axisXMouseenter',\n                  e,\n                  { x, y: chartY, w: span, h: tableHeight },\n                  { tableIndex, xIndex },\n                )\n                isInAxisX = true\n              }\n              isThisInAxisX = true\n            }\n            if (that.inTable(pointList[0].x - span, chartY, pointListWidth, tableHeight, e.offsetX, e.offsetY, tableIndex)) {\n              if (isInTable) {\n                that.emit(\n                  'tableMousemove',\n                  e,\n                  { x: pointList[0].x - span, y: chartY, w: pointListWidth, h: tableHeight },\n                  { tableIndex },\n                )\n              } else {\n                that.emit('tableMouseenter')\n                isInTable = true\n              }\n              isThisInTable = true\n            }\n          })\n        })\n      })\n\n      // 从内部移出\n      if (!isThisInPointPath && isInPointPath) {\n        isInPointPath = false\n        that.emit('pointMouseleave')\n      }\n      if (!isThisInAxisX && isInAxisX) {\n        isInAxisX = false\n        that.emit('axisXMouseleave')\n      }\n      if (!isThisInTable && isInTable) {\n        isInTable = false\n        that.emit('tableMouseleave')\n      }\n    });\n\n    canvas.addEventListener('mouseleave', function(){\n      that.emit('mouseleave')\n      isInPointPath = false\n      isInAxisX = false\n      isInTable = false\n    })\n  }\n\n  /**\n   * 坐标是否在绘制的坐标点上\n   * x1,y1 为点坐标位置\n   * x2,y2 为事件位置参数\n   */\n  inPointPath (x1, y1, x2, y2, tableIndex) {\n    const ctx = this.ctx\n    const { pointRadius, pointRadian } = this.options.chart.tables[tableIndex]\n    ctx.beginPath()\n    ctx.moveTo(x1, y1)\n    ctx.arc(x1, y1, pointRadius, 0, pointRadian, true)\n    const ret = ctx.isPointInPath(x2, y2)\n    ctx.closePath()\n    return ret\n  }\n\n  /**\n   * 坐标是否在 x 轴上\n   * x1,y1 为点坐标位置\n   * x2,y2 为事件位置参数\n   */\n  inAxisX (x1, y1, span, h, x2, y2, tableIndex) {\n    const ctx = this.ctx\n    ctx.beginPath()\n    ctx.rect(x1 - (span / 2), y1, span, h)\n    const ret = ctx.isPointInPath(x2, y2)\n    ctx.closePath()\n    return ret\n  }\n\n  /**\n   * 坐标是否单个表格中\n   * x1,y1 为点坐标位置\n   * x2,y2 为事件位置参数\n   */\n  inTable (x1, y1, w, h, x2, y2, tableIndex) {\n    const ctx = this.ctx\n    ctx.beginPath()\n    ctx.rect(x1, y1, w, h)\n    const ret = ctx.isPointInPath(x2, y2)\n    ctx.closePath()\n    return ret\n  }\n\n  addEvent () {\n    // this.on('pointMouseenter', () => {\n    //   this.canvas.style.cursor = 'pointer'\n    // })\n    // this.on('pointMouseleave', () => {\n    //   this.canvas.style.cursor = 'default'\n    // })\n    // this.on('pointMouseleave', () => {\n    //   this.ctx.beginPath()\n    //   this.ctx.moveTo(x, chartY)\n    //   this.ctx.lineTo(x, chartY + tableHeight)\n    //   this.ctx.stroke()\n    // })\n  }\n}\n\nXmany.prototype.name = name\nXmany.prototype.version = version\n\nexport default Xmany\n"],"names":["logs","type","message","console","undefined","error","Error","EventEmitter","events","eventName","callback","push","args","forEach","event","apply","readKeyValue","object","keyNames","target","split","keyName","getCanvasElement","el","canvas","document","getElementById","getContext","drawScale","ctx","location","parames","x","y","w","h","title","lineWidth","strokeStyle","fillStyle","beginPath","moveTo","lineTo","stroke","data","XList","startY","surplusH","scaleHeight","fontSize","textTop","scaleCount","length","span","offsetLeft","textAlign","font","fillText","item","name","singleChart","topShow","bottomShow","gridSpacingY","setLineDash","gridCount","parseInt","gridTop","i","drawTables","tables","scaleTop","textWidth","tableHeight","lastBottomShow","index","chartY","textY","map","table","tableIndex","min","max","setPercentage","pointRadian","difference","pointList","xIndex","values","setLint","value","percentage","Array","isArray","arc","pointRadius","fill","setPercentageDefault","Xmany","config","options","scaleList","pointAllList","initCanvas","width","height","setAttribute","scale","chart","tablesHeight","newChart","Math","PI","setOptions","clear","layout","watchEvent","addEvent","clearRect","that","isInPointPath","isInAxisX","isInTable","addEventListener","emit","e","isThisInPointPath","isThisInAxisX","isThisInTable","pointListWidth","valueIndex","inPointPath","offsetX","offsetY","inAxisX","inTable","x1","y1","x2","y2","ret","isPointInPath","closePath","rect","prototype","version"],"mappings":"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"}